1. Get the Caesium API URL:

{{- if contains "NodePort" .Values.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "caesium.fullname" . }})
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
{{- else if contains "LoadBalancer" .Values.service.type }}
  NOTE: It can take a few minutes for the LoadBalancer IP to be available.
  kubectl get service --namespace {{ .Release.Namespace }} {{ include "caesium.fullname" . }} -w
{{- else }}
  kubectl --namespace {{ .Release.Namespace }} port-forward service/{{ include "caesium.fullname" . }} 8080:{{ .Values.service.port }}
  curl -sf http://127.0.0.1:8080/health
{{- end }}

2. Check pod status:

  kubectl get pods --namespace {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

3. View cluster join data generated by init containers:

  kubectl exec --namespace {{ .Release.Namespace }} {{ include "caesium.fullname" . }}-0 -- cat /etc/caesium/database-nodes
