<!-- Generated by `caesium job schema --doc` -->
# Job Definition Schema

This document is generated from the job definition Go structs (`pkg/jobdef`). It highlights the required sections and key fields.

## Top-Level Fields

| Field | Type | Required | Notes |
|-------|------|----------|-------|
| `$schema` | string | optional | JSON schema reference for tooling. |
| `apiVersion` | string | required | Must be `v1`. |
| `kind` | string | required | Must be `Job`. |
| `metadata` | object | required | Includes alias, labels, annotations. |
| `trigger` | object | required | Defines how the job is invoked. |
| `callbacks` | array | optional | Notification hooks executed after runs. |
| `steps` | array | required | Ordered list of atoms/tasks forming the DAG. |

## Metadata

| Field | Type | Required | Notes |
|-------|------|----------|-------|
| `alias` | string | required | Unique identifier used across APIs and console. |
| `labels` | map[string]string | optional | Attach metadata for filtering. |
| `annotations` | map[string]string | optional | Free-form metadata surfaced to clients. |

## Trigger

Supported trigger types: `cron`, `http`. Each type accepts a `configuration` map that is persisted verbatim.

### Cron Trigger
| Field | Type | Required | Notes |
|-------|------|----------|-------|
| `cron` | string | required | POSIX cron spec (5 field). |
| `timezone` | string | optional | Defaults to `UTC`. |

### HTTP Trigger
| Field | Type | Required | Notes |
|-------|------|----------|-------|
| `path` | string | required | Route served under `/v1/jobs/:id`. |
| `secret` | string | optional | Shared secret validated by console/API clients. |

## Callbacks

Currently the `notification` callback is supported. Custom handlers consume the JSON payload via the callbacks table.

## Steps

Every step represents a task/atom pair. Steps default to the Docker engine when the `engine` field is omitted and automatically link to the next step unless `next` is specified.

| Field | Type | Required | Notes |
|-------|------|----------|-------|
| `name` | string | required | Unique within the job; used for DAG references. |
| `engine` | string | optional | One of `docker`, `podman`, `kubernetes`. Defaults to `docker`. |
| `image` | string | required | Container image reference. |
| `command` | array[string] | optional | Executed command; defaults to entrypoint. |
| `next` | string | optional | Explicit link to another step. |

## Secret References

Use `secret://` URIs for sensitive values. Supported providers: `env`, `k8s`, `vault`. See `docs/job-definitions.md` for details.
